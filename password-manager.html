<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Password Manager</title>

  <!-- Font & Icon -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- CSS eksternal -->
  <link rel="stylesheet" href="password-manager.css" />
</head>
<body>
  <div class="app fade-in">
    <!-- Header -->
    <header class="toolbar">
      <button class="back-btn" aria-label="Kembali" id="backButton">
        <i class="fa-solid fa-arrow-left"></i>
      </button>
      <h1>Password Manager</h1>
    </header>

    <!-- Content -->
    <main class="content">
      <form class="password-form" id="passwordForm">
        <label for="current-password">Current Password</label>
        <div class="input-box">
          <input type="password" id="current-password" placeholder="Enter current password">
          <i class="fa-solid fa-eye toggle-eye"></i>
        </div>

        <label for="new-password">New Password</label>
        <div class="input-box">
          <input type="password" id="new-password" placeholder="Enter new password">
          <i class="fa-solid fa-eye toggle-eye"></i>
        </div>

        <label for="confirm-password">Confirm New Password</label>
        <div class="input-box">
          <input type="password" id="confirm-password" placeholder="Confirm new password">
          <i class="fa-solid fa-eye toggle-eye"></i>
        </div>
      </form>
    </main>

    <!-- Fixed Bottom Button -->
    <footer class="bottom-bar">
      <button type="submit" form="passwordForm" class="submit-btn" id="animatedBtn">
        Change Password
      </button>
    </footer>
  </div>

  <!-- JavaScript -->
  <script>
    // Fade-in animasi
    window.addEventListener("DOMContentLoaded", () => {
      document.querySelector(".app").classList.add("show");
    });

    // Tombol back animasi kecil
    const backBtn = document.getElementById("backButton");
    backBtn.addEventListener("click", () => {
      backBtn.style.transform = "scale(0.85)";
      setTimeout(() => (backBtn.style.transform = "scale(1)"), 200);
    });

    // Dummy akun user
    const dummyUsers = [
      { username: "user@dekorin.com", password: "test123" },
      { username: "admin@dekorin.com", password: "adminpass" },
      { username: "demo@dekorin.com", password: "demo123" }
    ];

    // Toggle visibility password
    document.querySelectorAll(".toggle-eye").forEach((icon) => {
      icon.addEventListener("click", () => {
        const input = icon.previousElementSibling;
        const isHidden = input.type === "password";
        input.type = isHidden ? "text" : "password";

        icon.classList.toggle("fa-eye");
        icon.classList.toggle("fa-eye-slash");
      });
    });

    // Efek highlight saat input focus
    const inputs = document.querySelectorAll(".input-box input");
    inputs.forEach((input) => {
      input.addEventListener("focus", () => {
        input.parentElement.classList.add("active");
      });
      input.addEventListener("blur", () => {
        input.parentElement.classList.remove("active");
      });
    });

    // Efek tombol dan validasi
    const form = document.getElementById("passwordForm");
    const btn = document.getElementById("animatedBtn");

    form.addEventListener("submit", (e) => {
      e.preventDefault();

      const current = document.getElementById("current-password").value.trim();
      const newPass = document.getElementById("new-password").value.trim();
      const confirm = document.getElementById("confirm-password").value.trim();

      if (!current || !newPass || !confirm) {
        showMessage("⚠️ Please fill all fields", "error");
        return;
      }

      const validUser = dummyUsers.find(user => user.password === current);
      if (!validUser) {
        showMessage("❌ Wrong current password", "error");
        return;
      }

      if (newPass !== confirm) {
        showMessage("❌ Passwords do not match", "error");
        return;
      }

      validUser.password = newPass;
      showMessage("✅ Password changed successfully!", "success");
      form.reset();
    });

    // Animasi tombol + notifikasi
    function showMessage(message, type) {
      btn.textContent = message;
      btn.style.backgroundColor = type === "error" ? "#b3261e" : "#2f5130";
      btn.style.transition = "all 0.4s ease";
      btn.style.transform = "scale(0.95)";
      setTimeout(() => {
        btn.textContent = "Change Password";
        btn.style.backgroundColor = "#2f5130";
        btn.style.transform = "scale(1)";
      }, 1500);
    }
  </script>
</body>
</html>
